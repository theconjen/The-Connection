import{r as e,j as s}from"./vendor-radix-Cb0-vzxO.js";import{u as r,h as t,C as a,a as n,L as i,B as l,q as o,i as c,b as d,f as m,k as x}from"./index-CQmKbNyS.js";import{a as h,u}from"./vendor-query-qkAKzVJ0.js";import{S as p}from"./share-buttons-C-FR_qFy.js";import{aC as j,j as g,o as f,p as v,aD as b,i as N,aE as w,aF as y,f as k,w as M,V as C,P as L,n as A,aG as S,z as $,aH as B}from"./vendor-icons-CM8Yk8yJ.js";import{f as H}from"./vendor-utils-nlnd1Dju.js";import{S as F}from"./skeleton-D3l7g_Rg.js";function G({post:d,featured:m=!1}){const{user:x}=r(),{toast:u}=t(),[b,N]=e.useState(!1),w=h({mutationFn:async()=>{const e=await c("POST",`/api/posts/${d.id}/upvote`);return await e.json()},onSuccess:e=>{o.invalidateQueries({queryKey:["/api/posts"]}),d.communityId&&o.invalidateQueries({queryKey:["/api/posts",{community:d.community?.slug}]})},onError:e=>{u({title:"Error",description:"Could not upvote the post. Please try again.",variant:"destructive"})}});return s.jsxs(a,{className:`mb-6 ${m?"overflow-hidden":""} card-hover border-secondary/20 shadow-sm`,children:[m&&d.imageUrl&&s.jsx("div",{className:"w-full h-56 overflow-hidden",children:s.jsx("img",{src:d.imageUrl,alt:d.title,className:"w-full h-full object-cover"})}),s.jsxs(n,{className:"p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:d.community&&s.jsxs(s.Fragment,{children:[((e,r)=>{let t,a="";switch(r){case"primary":a="bg-primary/10 text-primary";break;case"secondary":a="bg-secondary/20 text-secondary-foreground";break;case"accent":a="bg-accent/20 text-accent-foreground";break;case"red":a="bg-destructive/10 text-destructive";break;default:a="bg-muted text-muted-foreground"}switch(e){case"pray":t=s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[s.jsx("path",{d:"M12 2v1"}),s.jsx("path",{d:"M12 21v-1"}),s.jsx("path",{d:"M3.3 7.8c-.4-1 .1-2 1-2.4 1-.4 2 .1 2.4 1 .4 1-.1 2-1 2.4-1 .4-2-.1-2.4-1Z"}),s.jsx("path",{d:"M20.7 16.2c-.4-1 .1-2 1-2.4 1-.4 2 .1 2.4 1 .4 1-.1 2-1 2.4-1 .4-2-.1-2.4-1Z"}),s.jsx("path",{d:"M3.3 16.2c-.4-1 .1-2 1-2.4 1-.4 2 .1 2.4 1 .4 1-.1 2-1 2.4-1 .4-2-.1-2.4-1Z"}),s.jsx("path",{d:"M20.7 7.8c-.4-1 .1-2 1-2.4 1-.4 2 .1 2.4 1 .4 1-.1 2-1 2.4-1 .4-2-.1-2.4-1Z"}),s.jsx("path",{d:"M9 15.9a4 4 0 0 0 6 0"}),s.jsx("path",{d:"M17 10c.7-.7.7-1.3 0-2"}),s.jsx("path",{d:"M7 8c-.7.7-.7 1.3 0 2"})]});break;case"book":t=s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:s.jsx("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})});break;case"church":t=s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[s.jsx("path",{d:"m2 22 10-10 10 10"}),s.jsx("path",{d:"M4 15v7"}),s.jsx("path",{d:"M20 15v7"}),s.jsx("path",{d:"M12 9v3"}),s.jsx("path",{d:"M12 3a6 6 0 0 1 1 3.142c0 .64-.057 1.11-.172 1.415-.114.306-.242.483-.242.483L12 9l-.586-.96s-.128-.177-.242-.483C11.057 7.252 11 6.782 11 6.142A6 6 0 0 1 12 3Z"})]});break;case"heart":t=s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:s.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})});break;default:t=s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}return s.jsx("div",{className:`w-10 h-10 rounded-full ${a} flex items-center justify-center`,children:t})})(d.community.iconName,d.community.iconColor),s.jsxs("div",{className:"ml-3",children:[s.jsx(i,{href:`/community/${d.community.slug}`,className:"font-medium text-foreground hover:text-primary transition-colors",children:s.jsxs("span",{className:"inline-flex items-center",children:["r/",d.community.slug,m&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-secondary/40 text-secondary-foreground",children:"Featured"})]})}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Posted by"," ",s.jsxs(i,{href:`/user/${d.author?.username||"anonymous"}`,className:"hover:text-primary transition-colors",children:["u/",d.author?.username||"anonymous"]})," • ",d.createdAt?(e=>{const s=new Date,r=Math.floor((s.getTime()-e.getTime())/1e3);return r<60?`${r} seconds ago`:r<3600?`${Math.floor(r/60)} minutes ago`:r<86400?`${Math.floor(r/3600)} hours ago`:r<2592e3?`${Math.floor(r/86400)} days ago`:H(e,"MMM d, yyyy")})(new Date(d.createdAt)):"recently"]})]})]})}),s.jsx(i,{href:`/posts/${d.id}`,children:s.jsxs("h2",{className:"text-xl font-semibold mb-3 hover:text-primary transition-colors group",children:[d.title,s.jsx("span",{className:"inline-block w-0 group-hover:w-full h-0.5 bg-primary/30 transition-all duration-300 mt-0.5"})]})}),s.jsxs("div",{className:"text-foreground/90 mb-6",children:[d.content.length>300?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[d.content.substring(0,300),"..."]}),s.jsxs(i,{href:`/posts/${d.id}`,className:"text-primary hover:text-primary/80 mt-2 inline-flex items-center gap-1 font-medium",children:["Read more",s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-1",children:s.jsx("path",{d:"m9 18 6-6-6-6"})})]})]}):s.jsx("p",{children:d.content}),!m&&d.imageUrl&&s.jsx("div",{className:"mt-4",children:s.jsx("img",{src:d.imageUrl,alt:d.title,className:"rounded-lg max-h-96 object-cover shadow-sm"})})]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm border-t border-secondary/10 pt-3",children:[s.jsxs(l,{variant:"ghost",size:"sm",className:"flex items-center text-muted-foreground hover:text-primary hover:bg-primary/5 transition-colors rounded-full",onClick:()=>{x?w.mutate():u({title:"Authentication Required",description:"Please log in to upvote posts.",variant:"default"})},children:[s.jsx(j,{className:"mr-1 h-4 w-4"}),s.jsx("span",{children:d.upvotes})]}),s.jsx(i,{href:`/posts/${d.id}`,children:s.jsxs(l,{variant:"ghost",size:"sm",className:"flex items-center text-muted-foreground hover:text-primary hover:bg-primary/5 transition-colors rounded-full",children:[s.jsx(g,{className:"mr-1 h-4 w-4"}),s.jsxs("span",{children:[d.commentCount," comments"]})]})}),s.jsxs(l,{variant:"ghost",size:"sm",className:"flex items-center text-muted-foreground hover:text-primary hover:bg-primary/5 transition-colors rounded-full",onClick:()=>N(!b),children:[s.jsx(f,{className:"mr-1 h-4 w-4"}),s.jsx("span",{children:"Share"})]}),s.jsxs(l,{variant:"ghost",size:"sm",className:"flex items-center text-muted-foreground hover:text-primary hover:bg-primary/5 transition-colors rounded-full",children:[s.jsx(v,{className:"mr-1 h-4 w-4"}),s.jsx("span",{children:"Save"})]})]}),b&&s.jsxs("div",{className:"mt-4 p-4 border border-secondary/20 rounded-lg bg-secondary/5",children:[s.jsx("h3",{className:"text-sm font-medium mb-3 text-foreground",children:"Share this post:"}),s.jsx(p,{url:`/posts/${d.id}`,title:d.title})]})]})]})}function P({onFilterChange:r,currentFilter:t}){const[i,o]=e.useState(!1);return s.jsx(a,{className:"mb-6",children:s.jsxs(n,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(l,{variant:"popular"===t?"secondary":"ghost",className:"popular"===t?"bg-primary-50 text-primary":"text-neutral-600",onClick:()=>r("popular"),children:[s.jsx(b,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Popular"})]}),s.jsxs(l,{variant:"latest"===t?"secondary":"ghost",className:"latest"===t?"bg-primary-50 text-primary":"text-neutral-600",onClick:()=>r("latest"),children:[s.jsx(N,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Latest"})]}),s.jsxs(l,{variant:"top"===t?"secondary":"ghost",className:"hidden md:flex "+("top"===t?"bg-primary-50 text-primary":"text-neutral-600"),onClick:()=>r("top"),children:[s.jsx(w,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Top"})]}),s.jsx("div",{className:"ml-auto",children:s.jsxs(l,{variant:"ghost",className:"text-neutral-600",onClick:()=>o(!i),children:[s.jsx(y,{className:"mr-2 h-4 w-4"}),s.jsx("span",{className:"hidden md:inline",children:"Filter"})]})})]}),i&&s.jsx("div",{className:"mt-3 p-3 border-t border-neutral-200",children:s.jsx("p",{className:"text-sm text-neutral-600 mb-2",children:"Additional filters coming soon"})})]})})}function W(){const{data:e,isLoading:r}=u({queryKey:["/api/apologetics"]}),t=e=>{switch(e){case"book":default:return s.jsx(k,{className:"text-amber-500 mr-2 h-4 w-4"});case"video":return s.jsx(C,{className:"text-amber-500 mr-2 h-4 w-4"});case"podcast":return s.jsx(M,{className:"text-amber-500 mr-2 h-4 w-4"})}};return r?s.jsxs(a,{children:[s.jsx(d,{className:"px-4 py-3 bg-primary-50 border-b border-primary-100",children:s.jsx(m,{className:"font-semibold text-primary-800",children:"Apologetics Center"})}),s.jsx("div",{className:"w-full h-32 bg-neutral-200 animate-pulse"}),s.jsxs(n,{className:"p-4",children:[s.jsx(F,{className:"h-4 w-32 mb-4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(F,{className:"h-4 w-full"}),s.jsx(F,{className:"h-4 w-full"}),s.jsx(F,{className:"h-4 w-full"})]})]})]}):s.jsxs(a,{children:[s.jsx(d,{className:"px-4 py-3 bg-primary-50 border-b border-primary-100",children:s.jsx(m,{className:"font-semibold text-primary-800",children:"Apologetics Center"})}),s.jsx("img",{src:"https://images.unsplash.com/photo-1585858229735-cd08d8cb510d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=400&h=200",alt:"Bible study resources and notes",className:"w-full h-32 object-cover"}),s.jsxs(n,{className:"p-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"Recommended Resources"}),s.jsx("ul",{className:"space-y-2 text-sm",children:e?.slice(0,3).map(e=>s.jsxs("li",{className:"flex items-center",children:[t(e.type),s.jsx("a",{href:e.url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-neutral-700 hover:text-primary",children:e.title})]},e.id))}),s.jsx("div",{className:"mt-4",children:s.jsx(i,{href:"/apologetics",className:"text-primary text-sm font-medium hover:text-primary-700",children:"Visit Apologetics Center →"})})]})]})}function z(){const{user:e}=r(),{data:t,isLoading:o}=u({queryKey:["/api/communities"],enabled:!!e}),c=(e,r)=>{let t,a="";switch(r){case"green":a="bg-green-100 text-green-600";break;case"blue":a="bg-blue-100 text-blue-600";break;case"purple":a="bg-purple-100 text-purple-600";break;default:a="bg-neutral-100 text-neutral-600"}switch(e){case"users":default:t=s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]});break;case"home":t=s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[s.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),s.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]});break;case"church":t=s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[s.jsx("path",{d:"m2 22 10-10 10 10"}),s.jsx("path",{d:"M4 15v7"}),s.jsx("path",{d:"M20 15v7"}),s.jsx("path",{d:"M12 9v3"}),s.jsx("path",{d:"M12 3a6 6 0 0 1 1 3.142c0 .64-.057 1.11-.172 1.415-.114.306-.242.483-.242.483L12 9l-.586-.96s-.128-.177-.242-.483C11.057 7.252 11 6.782 11 6.142A6 6 0 0 1 12 3Z"})]})}return s.jsx("div",{className:`w-8 h-8 rounded-full ${a} flex items-center justify-center mr-3`,children:t})};return e?o?s.jsxs(a,{children:[s.jsx(d,{className:"px-4 py-3 bg-neutral-50 border-b border-neutral-200",children:s.jsx(m,{className:"font-semibold text-neutral-800",children:"Your Private Groups"})}),s.jsx(n,{className:"p-2",children:[1,2,3].map(e=>s.jsxs("div",{className:"flex items-center p-2 rounded-lg",children:[s.jsx(F,{className:"w-8 h-8 rounded-full mr-3"}),s.jsxs("div",{children:[s.jsx(F,{className:"h-4 w-24"}),s.jsx(F,{className:"h-3 w-16 mt-1"})]})]},e))})]}):s.jsxs(a,{children:[s.jsx(d,{className:"px-4 py-3 bg-neutral-50 border-b border-neutral-200",children:s.jsx(m,{className:"font-semibold text-neutral-800",children:"Your Private Groups"})}),s.jsx(n,{className:"p-2",children:t&&t.length>0?s.jsx("ul",{className:"space-y-3",children:t.map(e=>s.jsx("li",{children:s.jsx(i,{href:`/communities/${e.id}`,children:s.jsxs("a",{className:"flex items-center p-2 rounded-lg hover:bg-neutral-100",children:[c(e.iconName,e.iconColor),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-sm",children:e.name}),s.jsxs("div",{className:"text-xs text-neutral-500",children:[Math.floor(10*Math.random())+3," members • Active"]})]})]})})},e.id))}):s.jsx("p",{className:"text-sm text-neutral-600 p-3 text-center",children:"You don't have any private groups yet."})}),s.jsxs(x,{className:"px-4 py-2 border-t border-neutral-200 flex justify-between items-center",children:[s.jsx(i,{href:"/communities",children:s.jsx("a",{className:"text-primary text-sm font-medium hover:text-primary-700",children:"View All Groups"})}),s.jsx(i,{href:"/communities",children:s.jsxs(l,{size:"sm",className:"bg-primary hover:bg-primary-600 text-white rounded-lg",children:[s.jsx(L,{className:"h-4 w-4 mr-1"})," New Group"]})})]})]}):s.jsxs(a,{children:[s.jsx(d,{className:"px-4 py-3 bg-neutral-50 border-b border-neutral-200",children:s.jsx(m,{className:"font-semibold text-neutral-800",children:"Private Groups"})}),s.jsxs(n,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-sm text-neutral-600 mb-3",children:"Sign in to see your private groups"}),s.jsx(i,{href:"/auth",children:s.jsx(l,{size:"sm",children:"Sign In"})})]})]})}function q(){const e=[{icon:s.jsx(A,{className:"text-red-500 mt-1 mr-2 h-4 w-4"}),text:"Speak the truth in love; be kind and respectful"},{icon:s.jsx(S,{className:"text-amber-500 mt-1 mr-2 h-4 w-4"}),text:"Support one another through prayer and encouragement"},{icon:s.jsx($,{className:"text-green-500 mt-1 mr-2 h-4 w-4"}),text:"Base discussions on Scripture when possible"},{icon:s.jsx(B,{className:"text-blue-500 mt-1 mr-2 h-4 w-4"}),text:"Seek unity in essential beliefs, liberty in non-essentials"}];return s.jsxs(a,{children:[s.jsx(d,{className:"px-4 py-3 bg-neutral-50 border-b border-neutral-200",children:s.jsx(m,{className:"font-semibold text-neutral-800",children:"Community Guidelines"})}),s.jsxs(n,{className:"p-4 text-sm",children:[s.jsx("ul",{className:"space-y-2",children:e.map((e,r)=>s.jsxs("li",{className:"flex items-start",children:[e.icon,s.jsx("span",{children:e.text})]},r))}),s.jsx("div",{className:"mt-4",children:s.jsx(i,{href:"/guidelines",className:"text-primary text-sm font-medium hover:text-primary-700",children:"Read Full Guidelines"})})]})]})}export{W as A,q as C,P as F,G as P,z as a};
