import{r as e,j as s}from"./vendor-radix-Cb0-vzxO.js";import{u as a}from"./vendor-query-qkAKzVJ0.js";import{M as t}from"./main-layout-BqoyFj5l.js";import{h as r,u as l,C as i,c,B as o,I as n,a as d,b as m,f as h,A as x,d as u,e as p,k as g}from"./index-CQmKbNyS.js";import{T as j,a as b,b as N,c as v}from"./tabs-N8_zO4xm.js";import{J as f,g as y,c as w,i as k,t as S,n as C,o as L}from"./vendor-icons-CM8Yk8yJ.js";import"./vendor-react-eVk5PToZ.js";import"./vendor-utils-nlnd1Dju.js";function B(){const{toast:S}=r(),{user:C}=l(),[L,B]=e.useState(""),[F,J]=e.useState("all"),{data:q,isLoading:z}=a({queryKey:["/api/livestreams","all"!==F?{status:F}:{}]}),{data:A}=a({queryKey:["/api/users"],enabled:!!q&&q.length>0}),I=q?q.map(e=>{const s=A?.find(s=>s.id===e.hostId),a=e.tags?e.tags.split(",").map(e=>e.trim()):[];return{...e,host:s,hostUsername:s?.username||`user_${e.hostId}`,tags:a,thumbnail:e.thumbnail||"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?q=80&w=1032&auto=format&fit=crop"}}):[],D=[{id:1,title:"Daily Prayer & Devotional",hostId:1,hostUsername:"sarah_j",thumbnail:"https://images.unsplash.com/photo-1507692049790-de58290a4334?q=80&w=1470&auto=format&fit=crop",status:"live",viewerCount:245,description:"Join us for daily prayer, scripture reading, and devotional time. Open to everyone!",tags:["prayer","devotional","daily"],createdAt:new Date,scheduledFor:null,duration:null},{id:2,title:"Bible Study: Book of Romans",hostId:2,hostUsername:"pastor_mike",thumbnail:"https://images.unsplash.com/photo-1504052434569-70ad5836ab65?q=80&w=1470&auto=format&fit=crop",status:"upcoming",scheduledFor:new Date("2025-05-14T19:00:00"),viewerCount:0,duration:"1 hour",description:"A deep dive into the Book of Romans. We'll be exploring chapters 5-8 this week.",tags:["bible-study","romans","theology"],createdAt:new Date}],R=I.length>0?I:z?D:[],T=(e,s,a)=>e.filter(e=>(e.title.toLowerCase().includes(s.toLowerCase())||(e.host?.username||e.hostUsername||"").toLowerCase().includes(s.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(s.toLowerCase())))&&(!a||e.status===a)),W=T(R,L,"live"),$=T(R,L,"upcoming"),P=T(R,L,"ended"),M=T(R,L),_=e=>{const s=e.host?.username||e.hostUsername||`user_${e.hostId}`;"live"===e.status?S({title:"Joining Livestream",description:`You're joining "${e.title}" hosted by ${s}`}):"upcoming"===e.status?S({title:"Reminder Set",description:`We'll remind you before "${e.title}" starts`}):S({title:"Watching Replay",description:`Now playing "${e.title}"`})},O=e=>"live"===e?s.jsxs(c,{className:"bg-red-500 hover:bg-red-600 text-white flex items-center gap-1 px-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-white animate-pulse"})," LIVE"]}):"upcoming"===e?s.jsxs(c,{className:"bg-secondary hover:bg-secondary/90 text-secondary-foreground flex items-center gap-1",children:[s.jsx(w,{className:"h-3 w-3 mr-1"})," Upcoming"]}):s.jsx(c,{variant:"outline",className:"text-muted-foreground border-muted-foreground/30",children:"Replay Available"});return s.jsxs(t,{children:[s.jsxs("div",{className:"flex-1 space-y-6",children:[s.jsx(i,{className:"overflow-hidden border-secondary/20",children:s.jsxs("div",{className:"relative h-56 md:h-64",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/60 to-secondary/60 z-10"}),s.jsx("img",{src:"https://images.unsplash.com/photo-1519750157634-b6d493a0f77c?q=80&w=1374&auto=format&fit=crop",alt:"Livestreams",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 z-20 flex flex-col justify-center p-6",children:s.jsxs("div",{className:"max-w-2xl",children:[s.jsx(c,{className:"bg-white/20 text-white backdrop-blur-sm",children:"New Feature"}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mt-3 mb-3",children:"Live Streams & Events"}),s.jsx("p",{className:"text-white/90 text-lg mb-6 max-w-xl",children:"Connect with the community through live prayer sessions, Bible studies, and more. Join a stream or host your own!"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs(o,{className:"bg-white text-primary hover:bg-white/90 font-medium",children:[s.jsx(f,{className:"mr-2 h-4 w-4"}),"Browse Livestreams"]}),C&&s.jsx(o,{variant:"outline",className:"bg-transparent border-white text-white hover:bg-white/10",children:"Start Your Own Stream"})]})]})})]})}),s.jsxs("div",{className:"relative",children:[s.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),s.jsx(n,{type:"text",placeholder:"Search livestreams, hosts, or topics...",className:"pl-10 border-secondary/20",value:L,onChange:e=>B(e.target.value)})]}),s.jsxs(j,{defaultValue:"all",className:"w-full",children:[s.jsxs(b,{className:"mb-4 bg-muted/50 p-1",children:[s.jsx(N,{value:"all",className:"data-[state=active]:bg-background data-[state=active]:text-primary",children:"All"}),s.jsxs(N,{value:"live",className:"data-[state=active]:bg-background data-[state=active]:text-primary",children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-red-500 animate-pulse mr-2"}),"Live Now"]}),s.jsxs(N,{value:"upcoming",className:"data-[state=active]:bg-background data-[state=active]:text-primary",children:[s.jsx(w,{className:"mr-2 h-4 w-4"}),"Upcoming"]}),s.jsx(N,{value:"past",className:"data-[state=active]:bg-background data-[state=active]:text-primary",children:"Past Streams"})]}),s.jsx(v,{value:"all",className:"space-y-6",children:M.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(e=>s.jsx(U,{stream:e,onJoin:()=>_(e),renderStatusBadge:O},e.id))}):s.jsx(i,{className:"border-dashed border-secondary/40",children:s.jsxs(d,{className:"flex flex-col items-center justify-center py-10 text-center",children:[s.jsx("div",{className:"rounded-full bg-muted p-3 mb-4",children:s.jsx(y,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium mb-1",children:"No livestreams found"}),s.jsx("p",{className:"text-muted-foreground max-w-md",children:"We couldn't find any livestreams matching your search criteria. Try adjusting your search term or check back later."})]})})}),s.jsx(v,{value:"live",className:"space-y-6",children:W.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(e=>s.jsx(U,{stream:e,onJoin:()=>_(e),renderStatusBadge:O},e.id))}):s.jsx(i,{className:"border-dashed border-secondary/40",children:s.jsxs(d,{className:"flex flex-col items-center justify-center py-10 text-center",children:[s.jsx("div",{className:"rounded-full bg-muted p-3 mb-4",children:s.jsx(f,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium mb-1",children:"No live streams right now"}),s.jsx("p",{className:"text-muted-foreground max-w-md",children:"There are no livestreams happening at the moment. Check the upcoming tab to see what's scheduled or browse past streams."})]})})}),s.jsx(v,{value:"upcoming",className:"space-y-6",children:$.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.map(e=>s.jsx(U,{stream:e,onJoin:()=>_(e),renderStatusBadge:O},e.id))}):s.jsx(i,{className:"border-dashed border-secondary/40",children:s.jsxs(d,{className:"flex flex-col items-center justify-center py-10 text-center",children:[s.jsx("div",{className:"rounded-full bg-muted p-3 mb-4",children:s.jsx(w,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium mb-1",children:"No upcoming streams"}),s.jsx("p",{className:"text-muted-foreground max-w-md",children:"There are no scheduled livestreams coming up. Check back later for new announcements."})]})})}),s.jsx(v,{value:"past",className:"space-y-6",children:P.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(e=>s.jsx(U,{stream:e,onJoin:()=>_(e),renderStatusBadge:O},e.id))}):s.jsx(i,{className:"border-dashed border-secondary/40",children:s.jsxs(d,{className:"flex flex-col items-center justify-center py-10 text-center",children:[s.jsx("div",{className:"rounded-full bg-muted p-3 mb-4",children:s.jsx(k,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium mb-1",children:"No past streams"}),s.jsx("p",{className:"text-muted-foreground max-w-md",children:"There are no past livestreams available to watch. Check the upcoming tab to see what's scheduled."})]})})})]})]}),s.jsxs("aside",{className:"hidden lg:block w-80 space-y-6 sticky top-24 self-start",children:[C&&s.jsxs(i,{className:"border-secondary/20 mb-4",children:[s.jsx(m,{className:"pb-2",children:s.jsx(h,{className:"text-lg",children:"Become a Livestreamer"})}),s.jsxs(d,{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Share your knowledge, host Bible studies, or lead prayer sessions as an approved livestreamer."}),s.jsx(o,{className:"w-full",variant:"secondary",onClick:()=>window.location.href="/livestreamer-application",children:"Apply Now"})]})]}),s.jsxs(i,{className:"border-secondary/20",children:[s.jsx(m,{className:"pb-2",children:s.jsx(h,{className:"text-lg",children:"Featured Hosts"})}),s.jsxs(d,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(x,{children:[s.jsx(u,{src:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=1374&auto=format&fit=crop"}),s.jsx(p,{children:"SJ"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Sarah Johnson"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Daily devotionals & prayer"})]}),s.jsx(o,{variant:"outline",size:"sm",className:"ml-auto rounded-full",children:"Follow"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(x,{children:s.jsx(p,{className:"bg-primary/20 text-primary",children:"PM"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Pastor Mike"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Bible studies & sermons"})]}),s.jsx(o,{variant:"outline",size:"sm",className:"ml-auto rounded-full",children:"Follow"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(x,{children:[s.jsx(u,{src:"https://images.unsplash.com/photo-1489424731084-a5d8b219a5bb?q=80&w=1374&auto=format&fit=crop"}),s.jsx(p,{children:"FW"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Faith Worship"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Music & worship"})]}),s.jsx(o,{variant:"outline",size:"sm",className:"ml-auto rounded-full",children:"Follow"})]})]}),s.jsx(g,{className:"pt-0",children:s.jsx(o,{variant:"ghost",size:"sm",className:"w-full text-primary",children:"View All Hosts"})})]}),s.jsxs(i,{className:"border-secondary/20",children:[s.jsx(m,{className:"pb-2",children:s.jsx(h,{className:"text-lg",children:"Popular Tags"})}),s.jsx(d,{children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(c,{variant:"secondary",className:"bg-secondary/20 hover:bg-secondary/30",children:"#prayer"}),s.jsx(c,{variant:"secondary",className:"bg-secondary/20 hover:bg-secondary/30",children:"#biblestudy"}),s.jsx(c,{variant:"secondary",className:"bg-secondary/20 hover:bg-secondary/30",children:"#worship"}),s.jsx(c,{variant:"secondary",className:"bg-secondary/20 hover:bg-secondary/30",children:"#youth"}),s.jsx(c,{variant:"secondary",className:"bg-secondary/20 hover:bg-secondary/30",children:"#women"}),s.jsx(c,{variant:"secondary",className:"bg-secondary/20 hover:bg-secondary/30",children:"#college"}),s.jsx(c,{variant:"secondary",className:"bg-secondary/20 hover:bg-secondary/30",children:"#faith"}),s.jsx(c,{variant:"secondary",className:"bg-secondary/20 hover:bg-secondary/30",children:"#community"})]})})]}),C&&s.jsxs(i,{className:"border-secondary/20 bg-gradient-to-b from-primary/5 to-background",children:[s.jsx(m,{className:"pb-2",children:s.jsx(h,{className:"text-lg",children:"Start Your Own Stream"})}),s.jsxs(d,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Share your faith journey with others. It's easy to start a livestream and connect with the community."}),s.jsx(o,{className:"w-full",children:"Create Livestream"})]})]})]})]})}function U({stream:e,onJoin:a,renderStatusBadge:t}){return s.jsxs(i,{className:"overflow-hidden card-hover border-secondary/20",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:"string"==typeof e.thumbnail?e.thumbnail:"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?q=80&w=1032&auto=format&fit=crop",alt:e.title,className:"w-full h-40 object-cover"}),s.jsx("div",{className:"absolute top-2 right-2",children:t(e.status)}),"live"===e.status&&s.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded-md flex items-center",children:[s.jsx(S,{className:"h-3 w-3 mr-1"}),e.viewerCount," watching"]}),"upcoming"===e.status&&e.scheduledFor&&s.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded-md flex items-center",children:[s.jsx(w,{className:"h-3 w-3 mr-1"}),new Date(e.scheduledFor).toLocaleString()]})]}),s.jsxs(d,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(x,{className:"h-8 w-8",children:e.host?.avatarUrl?s.jsx(u,{src:e.host.avatarUrl,alt:e.host.username}):s.jsx(p,{children:e.hostUsername?.substring(0,2).toUpperCase()||"??"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium",children:e.host?.displayName||e.hostUsername}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["@",e.hostUsername]})]})]}),e.duration&&s.jsxs(c,{variant:"outline",className:"text-xs font-normal",children:[s.jsx(k,{className:"h-3 w-3 mr-1"}),e.duration]})]}),s.jsx("h3",{className:"text-lg font-semibold mt-3 mb-1",children:e.title}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:e.description}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map((e,a)=>s.jsxs(c,{variant:"secondary",className:"text-xs bg-secondary/20 hover:bg-secondary/30",children:["#",e]},a))})]}),s.jsxs(g,{className:"p-4 pt-0 flex justify-between",children:[s.jsx(o,{variant:"live"===e.status?"default":"upcoming"===e.status?"outline":"secondary",onClick:a,className:"live"===e.status?"gap-1":"",children:"live"===e.status?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"h-2 w-2 rounded-full bg-white animate-pulse"}),"Join Now"]}):"upcoming"===e.status?"Set Reminder":"Watch Replay"}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(o,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full",children:s.jsx(C,{className:"h-4 w-4 text-muted-foreground"})}),s.jsx(o,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full",children:s.jsx(L,{className:"h-4 w-4 text-muted-foreground"})})]})]})]})}export{B as default};
