import{r as e,j as s}from"./vendor-radix-Cb0-vzxO.js";import{u as a,F as r,a as t,b as n,c as i,d as l,e as o,t as d}from"./form-Z2c2XcTx.js";import{h as c,B as m,I as h,i as x,u,R as j,C as p,b as g,l as f,f as w,j as v,a as b}from"./index-CQmKbNyS.js";import{i as N}from"./schema-BhHnCEQU.js";import{T as y,a as P,b as k,c as C}from"./tabs-N8_zO4xm.js";import{a as S}from"./vendor-query-qkAKzVJ0.js";import{A as M,a as R,b as A}from"./alert-VwKB4bPi.js";import{A as B,q as F,r as L,s as E,E as z,t as T}from"./vendor-icons-CM8Yk8yJ.js";import{o as I,s as U}from"./types-DUVubNlp.js";import"./vendor-react-eVk5PToZ.js";import"./label-BZLDYjV_.js";import"./vendor-utils-nlnd1Dju.js";const q=I({email:U().email("Please enter a valid email address")}),V=I({token:U().min(1,"Token is required"),password:U().min(8,"Password must be at least 8 characters long").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:U().min(8,"Password must be at least 8 characters long")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function W({onBack:u}){const{toast:j}=c(),[p,g]=e.useState("request"),[f,w]=e.useState(""),v=a({resolver:d(q),defaultValues:{email:""}}),b=a({resolver:d(V),defaultValues:{token:"",password:"",confirmPassword:""}}),N=S({mutationFn:async e=>{const s=await x("POST","/api/request-password-reset",e);return await s.json()},onSuccess:()=>{j({title:"Reset email sent",description:"If your email exists in our system, you will receive a reset link shortly"}),g("reset")},onError:e=>{j({title:"Failed to send reset email",description:e.message||"Please try again later",variant:"destructive"})}}),y=S({mutationFn:async e=>{const s=await x("POST","/api/reset-password",e);return await s.json()},onSuccess:()=>{j({title:"Password reset successful",description:"You can now log in with your new password"}),g("success")},onError:e=>{j({title:"Failed to reset password",description:e.message||"Invalid or expired token",variant:"destructive"})}}),P=e=>{N.mutate(e)},k=e=>{y.mutate(e)};return"request"===p?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(m,{variant:"ghost",size:"sm",className:"p-0 mr-2 hover:bg-transparent",onClick:u,children:s.jsx(B,{className:"h-4 w-4 mr-1"})}),s.jsx("h3",{className:"text-lg font-medium",children:"Reset Your Password"})]}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),s.jsx(r,{...v,children:s.jsxs("form",{onSubmit:v.handleSubmit(P),className:"space-y-4",children:[s.jsx(t,{control:v.control,name:"email",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"Email"}),s.jsx(l,{children:s.jsx(h,{placeholder:"your@email.com",...e})}),s.jsx(o,{})]})}),s.jsx(m,{type:"submit",className:"w-full",disabled:N.isPending,children:N.isPending?s.jsxs(s.Fragment,{children:[s.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Reset Link"})]})})]}):"reset"===p?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(m,{variant:"ghost",size:"sm",className:"p-0 mr-2 hover:bg-transparent",onClick:()=>g("request"),children:s.jsx(B,{className:"h-4 w-4 mr-1"})}),s.jsx("h3",{className:"text-lg font-medium",children:"Set New Password"})]}),s.jsxs(M,{className:"mb-4",children:[s.jsx(L,{className:"h-4 w-4"}),s.jsx(R,{children:"Check your email"}),s.jsx(A,{children:"We've sent a password reset token to your email address. Enter it below to continue."})]}),s.jsx(r,{...b,children:s.jsxs("form",{onSubmit:b.handleSubmit(k),className:"space-y-4",children:[s.jsx(t,{control:b.control,name:"token",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"Reset Token"}),s.jsx(l,{children:s.jsx(h,{placeholder:"Enter token from email",value:f,onChange:e=>{return s=e.target.value,w(s),void b.setValue("token",s);var s}})}),s.jsx(o,{})]})}),s.jsx(t,{control:b.control,name:"password",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"New Password"}),s.jsx(l,{children:s.jsx(h,{type:"password",placeholder:"••••••••",...e})}),s.jsx(o,{}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Password must contain at least 8 characters including uppercase, lowercase, number, and special character."})]})}),s.jsx(t,{control:b.control,name:"confirmPassword",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"Confirm Password"}),s.jsx(l,{children:s.jsx(h,{type:"password",placeholder:"••••••••",...e})}),s.jsx(o,{})]})}),s.jsx(m,{type:"submit",className:"w-full",disabled:y.isPending,children:y.isPending?s.jsxs(s.Fragment,{children:[s.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Resetting..."]}):"Reset Password"})]})})]}):s.jsxs("div",{className:"text-center py-6",children:[s.jsx(E,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-medium mb-2",children:"Password Reset Successful"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Your password has been reset successfully. You can now log in with your new password."}),s.jsx(m,{onClick:u,className:"w-full",children:"Return to Login"})]})}const O=I({username:U().min(3,"Username must be at least 3 characters"),password:U().min(6,"Password must be at least 6 characters")}),D=N.extend({username:U().min(3,"Username must be at least 3 characters"),email:U().email("Please enter a valid email address"),password:U().min(6,"Password must be at least 6 characters"),confirmPassword:U().min(6,"Please confirm your password")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function Y(){const c=u(),{user:x}=c,[N,S]=e.useState("login"),[M,R]=e.useState(!1),[A,B]=e.useState(!1),[L,E]=e.useState(!1),I=a({resolver:d(O),defaultValues:{username:"",password:""}}),U=a({resolver:d(D),defaultValues:{username:"",email:"",displayName:"",password:"",confirmPassword:"",bio:""}});return x?s.jsx(j,{to:"/"}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 flex flex-col md:flex-row relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-24 -left-24 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute -bottom-24 -right-24 w-96 h-96 bg-accent/5 rounded-full blur-3xl"})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-6 relative z-10",children:s.jsx("div",{className:"w-full max-w-md auth-card-enter",children:s.jsxs(p,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-sm hover:shadow-3xl transition-shadow duration-300",children:[s.jsxs(g,{className:"space-y-4 pb-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex items-center gap-3 font-bold text-2xl text-primary group",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:f,alt:"The Connection Logo",className:"h-12 w-auto transition-transform duration-300 group-hover:scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-accent/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),s.jsx("span",{className:"text-gradient font-semibold text-2xl",children:"The Connection"})]})}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx(w,{className:"text-3xl font-bold text-gradient",children:"Welcome!"}),s.jsx(v,{className:"text-muted-foreground text-base",children:"Sign in to your account or create a new one to get started"})]})]}),s.jsx(b,{className:"pt-2",children:s.jsxs(y,{defaultValue:"login",value:N,onValueChange:S,children:[s.jsxs(P,{className:"grid w-full grid-cols-3 mb-6 bg-muted/50 p-1 rounded-lg",children:[s.jsx(k,{value:"login",className:"custom-tab-trigger transition-all duration-200 data-[state=active]:shadow-sm",children:"Login"}),s.jsx(k,{value:"register",className:"custom-tab-trigger transition-all duration-200 data-[state=active]:shadow-sm",children:"Register"}),s.jsx(k,{value:"reset",className:"custom-tab-trigger transition-all duration-200 data-[state=active]:shadow-sm",children:"Reset"})]}),s.jsxs(C,{value:"login",children:[s.jsx(r,{...I,children:s.jsxs("form",{onSubmit:I.handleSubmit(e=>{c.loginMutation.mutate(e)}),className:"space-y-5",children:[s.jsx(t,{control:I.control,name:"username",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{className:"text-sm font-medium text-foreground",children:"Username"}),s.jsx(l,{children:s.jsx("div",{className:"form-input-focus",children:s.jsx(h,{placeholder:"johnsmith",...e,className:"h-11 bg-background/50 border-muted-foreground/20 focus:border-primary/50 focus:ring-primary/20"})})}),s.jsx(o,{})]})}),s.jsx(t,{control:I.control,name:"password",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{className:"text-sm font-medium text-foreground",children:"Password"}),s.jsx(l,{children:s.jsxs("div",{className:"relative form-input-focus",children:[s.jsx(h,{type:M?"text":"password",placeholder:"••••••••",...e,className:"h-11 bg-background/50 border-muted-foreground/20 focus:border-primary/50 focus:ring-primary/20 pr-12"}),s.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>R(!M),tabIndex:-1,children:M?s.jsx(z,{className:"h-4 w-4 text-muted-foreground hover:text-primary transition-colors"}):s.jsx(T,{className:"h-4 w-4 text-muted-foreground hover:text-primary transition-colors"})})]})}),s.jsx(o,{})]})}),s.jsx(m,{type:"submit",className:"w-full btn-gradient h-11 text-base font-medium shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-[1.02]",disabled:c.loginMutation.isPending,children:c.loginMutation.isPending?s.jsxs(s.Fragment,{children:[s.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),s.jsxs("div",{className:"mt-4 text-center text-sm",children:[s.jsx("div",{className:"mb-2",children:s.jsx(m,{variant:"link",className:"p-0 text-muted-foreground hover:text-primary",onClick:()=>S("reset"),children:"Forgot your password?"})}),s.jsx("span",{className:"text-muted-foreground",children:"Don't have an account? "}),s.jsx(m,{variant:"link",className:"p-0 text-gradient",onClick:()=>S("register"),children:"Register"})]})]}),s.jsxs(C,{value:"register",children:[s.jsx(r,{...U,children:s.jsxs("form",{onSubmit:U.handleSubmit(e=>{const{confirmPassword:s,...a}=e;c.registerMutation.mutate(a)}),className:"space-y-4",children:[s.jsx(t,{control:U.control,name:"username",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"Username"}),s.jsx(l,{children:s.jsx(h,{placeholder:"johnsmith",...e})}),s.jsx(o,{})]})}),s.jsx(t,{control:U.control,name:"email",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"Email"}),s.jsx(l,{children:s.jsx(h,{type:"email",placeholder:"john@example.com",...e})}),s.jsx(o,{})]})}),s.jsx(t,{control:U.control,name:"displayName",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"Display Name (optional)"}),s.jsx(l,{children:s.jsx(h,{placeholder:"John Smith",...e,value:e.value||""})}),s.jsx(o,{})]})}),s.jsx(t,{control:U.control,name:"password",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"Password"}),s.jsx(l,{children:s.jsxs("div",{className:"relative",children:[s.jsx(h,{type:A?"text":"password",placeholder:"••••••••",...e}),s.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>B(!A),tabIndex:-1,children:A?s.jsx(z,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(T,{className:"h-4 w-4 text-muted-foreground"})})]})}),s.jsx(o,{})]})}),s.jsx(t,{control:U.control,name:"confirmPassword",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"Confirm Password"}),s.jsx(l,{children:s.jsxs("div",{className:"relative",children:[s.jsx(h,{type:L?"text":"password",placeholder:"••••••••",...e}),s.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>E(!L),tabIndex:-1,children:L?s.jsx(z,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(T,{className:"h-4 w-4 text-muted-foreground"})})]})}),s.jsx(o,{})]})}),s.jsx(t,{control:U.control,name:"bio",render:({field:e})=>s.jsxs(n,{children:[s.jsx(i,{children:"Bio (optional)"}),s.jsx(l,{children:s.jsx(h,{placeholder:"Tell us a bit about yourself",...e,value:e.value||""})}),s.jsx(o,{})]})}),s.jsx(m,{type:"submit",className:"w-full btn-gradient h-11 text-base font-medium shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-[1.02]",disabled:c.registerMutation.isPending,children:c.registerMutation.isPending?s.jsxs(s.Fragment,{children:[s.jsx(F,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"})]})}),s.jsxs("div",{className:"mt-4 text-center text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Already have an account? "}),s.jsx(m,{variant:"link",className:"p-0 text-gradient",onClick:()=>S("login"),children:"Sign In"})]})]}),s.jsx(C,{value:"reset",children:s.jsx(W,{onBack:()=>S("login")})})]})})]})})}),s.jsxs("div",{className:"flex-1 bg-gradient-to-br from-primary via-primary to-secondary p-12 flex flex-col justify-center relative hidden md:flex overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-8",children:s.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[s.jsxs("defs",{children:[s.jsx("pattern",{id:"grid",width:"12",height:"12",patternUnits:"userSpaceOnUse",children:s.jsx("path",{d:"M 12 0 L 0 0 0 12",fill:"none",stroke:"white",strokeWidth:"0.3"})}),s.jsx("pattern",{id:"dots",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:s.jsx("circle",{cx:"2",cy:"2",r:"1",fill:"white",opacity:"0.3"})})]}),s.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),s.jsx("rect",{width:"100%",height:"100%",fill:"url(#dots)"})]})}),s.jsx("div",{className:"absolute top-20 right-16 w-32 h-32 bg-accent/10 rounded-full blur-2xl pulse-accent"}),s.jsx("div",{className:"absolute bottom-32 left-12 w-24 h-24 bg-white/5 rounded-full blur-xl floating-bg-element"}),s.jsxs("div",{className:"relative z-10 text-white max-w-lg mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-4xl font-bold mb-4 leading-tight",children:["Join Our ",s.jsx("span",{className:"text-accent",children:"Christian"})," Community"]}),s.jsx("p",{className:"text-xl mb-6 text-white/90 leading-relaxed",children:"The Connection is a community platform for Christians to grow together through discussions, Bible studies, and apologetics resources."}),s.jsx("div",{className:"w-16 h-1 bg-accent rounded-full"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start group hero-feature-hover",children:[s.jsx("div",{className:"mr-4 p-2 bg-accent/20 rounded-lg transition-all duration-300 group-hover:bg-accent/30 group-hover:scale-110",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6 text-accent",children:[s.jsx("path",{d:"M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"}),s.jsx("path",{d:"M3 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),s.jsx("path",{d:"M21 21v-2a4 4 0 0 0-3-3.85"})]})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold mb-2 text-lg",children:"Join Discussion Communities"}),s.jsx("p",{className:"text-white/80 leading-relaxed",children:"Engage in thoughtful conversations about faith, theology, and Christian living with believers worldwide."})]})]}),s.jsxs("div",{className:"flex items-start group hero-feature-hover",children:[s.jsx("div",{className:"mr-4 p-2 bg-accent/20 rounded-lg transition-all duration-300 group-hover:bg-accent/30 group-hover:scale-110",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6 text-accent",children:s.jsx("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold mb-2 text-lg",children:"Access Apologetics Resources"}),s.jsx("p",{className:"text-white/80 leading-relaxed",children:"Learn how to defend your faith with confidence using our curated materials and expert guidance."})]})]}),s.jsxs("div",{className:"flex items-start group hero-feature-hover",children:[s.jsx("div",{className:"mr-4 p-2 bg-accent/20 rounded-lg transition-all duration-300 group-hover:bg-accent/30 group-hover:scale-110",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-6 w-6 text-accent",children:[s.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),s.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold mb-2 text-lg",children:"Create Private Bible Study Groups"}),s.jsx("p",{className:"text-white/80 leading-relaxed",children:"Form private groups for Bible studies, prayer, and fellowship with friends and family."})]})]})]})]})]})]})}export{Y as default};
