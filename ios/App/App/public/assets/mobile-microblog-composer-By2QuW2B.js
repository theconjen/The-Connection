import{r as e,j as s}from"./vendor-radix-Cb0-vzxO.js";import{h as t,i as r,C as a,a as i,L as n,A as l,d as o,e as d,y as c,D as m,o as u,B as h,p as x,r as p,k as g,u as j,q as v,S as f,w as b,x as N,z as y,E as w,F as k}from"./index-CQmKbNyS.js";import{c as C,a as S}from"./vendor-query-qkAKzVJ0.js";import{S as I}from"./share-buttons-C-FR_qFy.js";import{as as P,M as $,at as U,n as L,o as z,X as D,au as E,O as F,a9 as Q}from"./vendor-icons-CM8Yk8yJ.js";import{a as q}from"./vendor-utils-nlnd1Dju.js";import{T as R}from"./textarea-BQP-18ak.js";function T({post:j,showControls:v=!0,isAuthenticated:f=!1,isDetailView:b=!1}){const N=C(),{toast:y}=t(),[w,k]=e.useState(!1),[D,E]=e.useState(!1),F=e.useRef(null),Q=S({mutationFn:async e=>{e?await r("DELETE",`/api/microblogs/${j.id}/like`):await r("POST",`/api/microblogs/${j.id}/like`)},onMutate:e=>{N.setQueryData(["/api/microblogs"],s=>s?s.map(s=>s.id===j.id?{...s,likeCount:s.likeCount+(e?-1:1),isLiked:!e}:s):s),N.setQueryData(["/api/microblogs",j.id],s=>s?{...s,likeCount:s.likeCount+(e?-1:1),isLiked:!e}:s)},onError:(e,s)=>{y({title:"Error",description:s?"Failed to unlike post. Please try again.":"Failed to like post. Please try again.",variant:"destructive"}),N.setQueryData(["/api/microblogs"],e=>e?e.map(e=>e.id===j.id?{...e,likeCount:e.likeCount+(s?1:-1),isLiked:s}:e):e),N.setQueryData(["/api/microblogs",j.id],e=>e?{...e,likeCount:e.likeCount+(s?1:-1),isLiked:s}:e)},onSettled:()=>{N.invalidateQueries({queryKey:["/api/microblogs"]}),N.invalidateQueries({queryKey:["/api/microblogs",j.id]})}}),R=()=>{k(e=>!e)},T=`/microblogs/${j.id}`;return s.jsxs(a,{className:"mb-4 overflow-hidden shadow-sm hover:shadow transition-shadow duration-200  border/50",children:[s.jsx(i,{className:"pt-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(n,{href:`/users/${j.authorId}`,children:s.jsx(l,{className:"cursor-pointer h-10 w-10",children:j.author?.avatarUrl?s.jsx(o,{src:j.author.avatarUrl,alt:j.author.displayName||"User"}):s.jsx(d,{children:c(j.author?.displayName||"User")})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-wrap",children:[s.jsx(n,{href:`/users/${j.authorId}`,children:s.jsx("h3",{className:"text-sm font-semibold cursor-pointer hover:underline truncate max-w-[140px]",children:j.author?.displayName||"User"})}),s.jsxs("span",{className:"text-xs text-muted-foreground truncate ml-1.5",children:["@",j.author?.username||"user"]}),s.jsx("span",{className:"text-xs text-muted-foreground mx-1.5",children:"Â·"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:(e=>{const s=new Date,t=new Date(e);return(s.getTime()-t.getTime())/36e5<24?q(t,{addSuffix:!0}):t.getFullYear()===s.getFullYear()?t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(j.createdAt)})]}),s.jsxs(m,{children:[s.jsx(u,{asChild:!0,children:s.jsxs(h,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:bg-background/80 ml-auto",children:[s.jsx(P,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"More options"})]})}),s.jsxs(x,{align:"end",children:[s.jsx(p,{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}${T}`),children:"Copy link"}),s.jsx(p,{onClick:R,children:"Share post"}),f&&1===j.authorId&&s.jsxs(s.Fragment,{children:[s.jsx(p,{children:"Edit post"}),s.jsx(p,{className:"text-destructive",children:"Delete post"})]}),f&&1!==j.authorId&&s.jsx(p,{children:"Report post"})]})]})]}),j.parentId&&!b&&s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Replying to a post"}),s.jsx(n,{href:T,children:s.jsx("div",{className:"mt-1.5 text-foreground whitespace-pre-wrap break-words",dangerouslySetInnerHTML:{__html:(e=>{let s=e;return s=s.replace(/https?:\/\/[^\s]+/g,e=>`<a href="${e}" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">${e}</a>`),s=s.replace(/#(\w+)/g,(e,s)=>`<a href="/tags/${s}" class="text-primary hover:underline">${e}</a>`),s=s.replace(/@(\w+)/g,(e,s)=>`<a href="/users/${s}" class="text-primary hover:underline">${e}</a>`),s})(j.content)}})}),j.imageUrl&&s.jsxs("div",{className:"mt-3 relative overflow-hidden rounded-lg",children:[!D&&s.jsx("div",{className:"bg-muted animate-pulse rounded-lg w-full h-48 flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading image..."})}),s.jsx(n,{href:T,children:s.jsx("img",{ref:F,src:j.imageUrl,alt:"Post attachment",className:"rounded-lg max-h-96 w-full object-cover border  border/10 "+(D?"block":"hidden"),loading:"lazy",onLoad:()=>{E(!0)}})})]})]})]})}),v&&s.jsx(g,{className:"py-2 px-4 border-t  border/10",children:s.jsxs("div",{className:"flex justify-between w-full",children:[s.jsx(n,{href:`/microblogs/${j.id}`,children:s.jsxs(h,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground hover:bg-secondary/30",children:[s.jsx($,{className:"h-4 w-4 mr-1.5"}),s.jsx("span",{children:j.replyCount||0})]})}),s.jsxs(h,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-emerald-600 hover:bg-emerald-50/30",disabled:!f,children:[s.jsx(U,{className:"h-4 w-4 mr-1.5"}),s.jsx("span",{children:j.repostCount||0})]}),s.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>{f?Q.mutate(j.isLiked||!1):y({title:"Authentication required",description:"Please sign in to like posts",variant:"default"})},className:"hover:bg-pink-50/30 "+(j.isLiked?"text-pink-500":"text-muted-foreground hover:text-pink-500"),disabled:Q.isPending,children:[s.jsx(L,{className:"h-4 w-4 mr-1.5 transition-all "+(j.isLiked?"fill-pink-500":"")}),s.jsx("span",{children:j.likeCount||0})]}),s.jsxs(h,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-blue-500 hover:bg-blue-50/30",onClick:R,children:[s.jsx(z,{className:"h-4 w-4 mr-1.5"}),s.jsx("span",{children:"Share"})]})]})}),w&&s.jsxs("div",{className:"p-4 border-t  border/10 bg-secondary/5",children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Share this post"}),s.jsx(I,{url:`${window.location.origin}${T}`,title:`Post by ${j.author?.displayName||"User"}: ${j.content.substring(0,30)}...`})]})]})}function K({parentId:n,communityId:m,groupId:u,onSuccess:x}){const{user:p}=j(),{toast:f}=t(),[b,N]=e.useState(""),[y,w]=e.useState(null),[k,C]=e.useState(null),[I,P]=e.useState(0),$=e.useRef(null),U=280,L=S({mutationFn:async e=>{if(y){const s=new FormData;s.append("content",e.content),void 0!==e.parentId&&s.append("parentId",e.parentId.toString()),void 0!==e.communityId&&s.append("communityId",e.communityId.toString()),void 0!==e.groupId&&s.append("groupId",e.groupId.toString()),s.append("authorId",e.authorId.toString()),s.append("image",y);const t=await fetch("/api/microblogs",{method:"POST",body:s,credentials:"include"});if(!t.ok)throw new Error("Failed to create microblog");return await t.json()}{const s=await r("POST","/api/microblogs",e);return await s.json()}},onSuccess:()=>{N(""),w(null),C(null),P(0),v.invalidateQueries({queryKey:["/api/microblogs"]}),n&&v.invalidateQueries({queryKey:["/api/microblogs",n,"replies"]}),m&&v.invalidateQueries({queryKey:["/api/communities",m,"microblogs"]}),u&&v.invalidateQueries({queryKey:["/api/communities",u,"microblogs"]}),f({title:"Success",description:"Your post has been published"}),x&&x()},onError:e=>{f({title:"Error",description:`Failed to publish post: ${e.message}`,variant:"destructive"})}});return p?s.jsxs(a,{className:"mb-6",children:[s.jsx(i,{className:"p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(l,{children:p.avatarUrl?s.jsx(o,{src:p.avatarUrl,alt:p.displayName||"User"}):s.jsx(d,{children:c(p.displayName||"User")})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(R,{placeholder:n?"Write your reply...":"What's on your mind?",className:"border-none resize-none focus-visible:ring-0 focus-visible:ring-offset-0 h-24",value:b,onChange:e=>{const s=e.target.value;N(s),P(s.length)}}),k&&s.jsxs("div",{className:"relative mt-2 inline-block",children:[s.jsx("img",{src:k,alt:"Preview",className:"max-h-52 max-w-full object-contain rounded-md border"}),s.jsx(h,{variant:"destructive",size:"icon",className:"absolute top-1 right-1 h-7 w-7 rounded-full",onClick:()=>{w(null),C(null),$.current&&($.current.value="")},children:s.jsx(D,{className:"h-4 w-4"})})]})]})]})}),s.jsxs(g,{className:"border-t p-3 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:$,onChange:e=>{if(e.target.files&&e.target.files[0]){const s=e.target.files[0];w(s);const t=new FileReader;t.onloadend=()=>{C(t.result)},t.readAsDataURL(s)}}}),s.jsx(h,{variant:"ghost",size:"sm",className:"text-primary",onClick:()=>$.current?.click(),children:s.jsx(E,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm "+(I>U?"text-red-500":"text-muted-foreground"),children:[I,"/",U]}),s.jsx(h,{disabled:""===b.trim()||I>U||L.isPending,onClick:()=>{if(!p)return void f({title:"Authentication required",description:"Please sign in to create posts",variant:"default"});if(""===b.trim())return void f({title:"Error",description:"Post content cannot be empty",variant:"destructive"});if(b.length>U)return void f({title:"Error",description:"Content exceeds 280 character limit",variant:"destructive"});const e={content:b,authorId:p.id,...n&&{parentId:n},...m&&{communityId:m},...u&&{groupId:u}};L.mutate(e)},children:L.isPending?"Publishing...":n?"Reply":"Post"})]})]})]}):s.jsx(a,{className:"mb-6",children:s.jsx(i,{className:"p-4",children:s.jsx("p",{className:"text-center text-muted-foreground",children:"Please sign in to create posts"})})})}function A({post:a,showControls:i=!0,isAuthenticated:g=!1,isDetailView:j=!1,onSwipeLeft:v,onSwipeRight:y}){const w=C(),{toast:k}=t(),[D,E]=e.useState(!1),[F,Q]=e.useState(!1),[R,T]=e.useState(!1),[K,A]=e.useState(!1),O=e.useRef(null),W=S({mutationFn:async e=>{e?await r("DELETE",`/api/microblogs/${a.id}/like`):await r("POST",`/api/microblogs/${a.id}/like`)},onMutate:e=>{w.setQueryData(["/api/microblogs"],s=>s?s.map(s=>s.id===a.id?{...s,likeCount:(s.likeCount||0)+(e?-1:1),isLiked:!e}:s):s),w.setQueryData(["/api/microblogs",a.id],s=>s?{...s,likeCount:(s.likeCount||0)+(e?-1:1),isLiked:!e}:s)},onError:(e,s)=>{k({title:"Error",description:s?"Failed to unlike post. Please try again.":"Failed to like post. Please try again.",variant:"destructive"}),w.setQueryData(["/api/microblogs"],e=>e?e.map(e=>e.id===a.id?{...e,likeCount:e.likeCount+(s?1:-1),isLiked:s}:e):e),w.setQueryData(["/api/microblogs",a.id],e=>e?{...e,likeCount:e.likeCount+(s?1:-1),isLiked:s}:e)},onSettled:()=>{w.invalidateQueries({queryKey:["/api/microblogs"]}),w.invalidateQueries({queryKey:["/api/microblogs",a.id]})}}),M=()=>{E(e=>!e)},_=`/microblogs/${a.id}`;return s.jsxs("div",{className:"border-b  border/10 px-2 py-3 bg-background active:bg-secondary/5 transition-colors duration-150",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx(n,{href:`/users/${a.authorId}`,children:s.jsx(l,{className:"h-10 w-10 cursor-pointer border  border/20",children:a.author?.avatarUrl?s.jsx(o,{src:a.author.avatarUrl,alt:a.author.displayName||"User"}):s.jsx(d,{children:c(a.author?.displayName||"User")})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(n,{href:`/users/${a.authorId}`,children:s.jsx("span",{className:"text-sm font-semibold cursor-pointer truncate max-w-[120px]",children:a.author?.displayName||"User"})}),s.jsxs("span",{className:"text-xs text-muted-foreground ml-1.5",children:["@",a.author?.username||"user"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground -mt-0.5",children:(Y=a.createdAt,q(new Date(Y),{addSuffix:!0}))})]}),s.jsx("div",{className:"-mr-2 -mt-1",children:s.jsxs(m,{children:[s.jsx(u,{asChild:!0,children:s.jsxs(h,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full text-muted-foreground",children:[s.jsx(P,{className:"h-5 w-5"}),s.jsx("span",{className:"sr-only",children:"Post options"})]})}),s.jsxs(x,{align:"end",className:"w-48",children:[s.jsx(p,{onClick:M,children:"Share post"}),s.jsx(p,{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}${_}`),children:"Copy link"}),g&&1===a.authorId&&s.jsxs(s.Fragment,{children:[s.jsx(p,{children:"Edit post"}),s.jsx(p,{className:"text-destructive",children:"Delete post"})]}),g&&1!==a.authorId&&s.jsx(p,{children:"Report post"})]})]})})]}),a.parentId&&!j&&s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Replying to a post"}),s.jsx(n,{href:_,children:s.jsx("div",{className:"mt-1.5 text-sm text-foreground whitespace-pre-wrap break-words leading-5",dangerouslySetInnerHTML:{__html:(e=>{let s=e;return s=s.replace(/https?:\/\/[^\s]+/g,e=>`<a href="${e}" target="_blank" rel="noopener noreferrer" class="text-primary hover:opacity-80 active:opacity-60">${e}</a>`),s=s.replace(/#(\w+)/g,(e,s)=>`<a href="/tags/${s}" class="text-primary hover:opacity-80 active:opacity-60">${e}</a>`),s=s.replace(/@(\w+)/g,(e,s)=>`<a href="/users/${s}" class="text-primary hover:opacity-80 active:opacity-60">${e}</a>`),s})(a.content)}})}),a.imageUrl&&!K&&s.jsxs("div",{className:"mt-3 relative overflow-hidden rounded-lg",children:[!R&&s.jsx("div",{className:"bg-muted animate-pulse rounded-lg w-full h-40 flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading image..."})}),s.jsx(n,{href:_,children:s.jsx("img",{ref:O,src:a.imageUrl,alt:"Post attachment",className:"rounded-lg w-full object-cover border  border/10 "+(R?"block":"hidden"),loading:"lazy",onLoad:()=>{T(!0)},onError:()=>{A(!0)},style:{maxHeight:"250px"}})})]}),i&&s.jsxs("div",{className:"flex justify-between mt-3 w-full max-w-full px-2",children:[s.jsx(n,{href:`/microblogs/${a.id}`,children:s.jsxs(h,{variant:"ghost",size:"sm",className:"text-muted-foreground h-9 rounded-full px-3 hover:bg-secondary/30",children:[s.jsx($,{className:"h-4 w-4 mr-1.5"}),s.jsx("span",{className:"text-xs",children:a.replyCount||0})]})}),s.jsxs(h,{variant:"ghost",size:"sm",className:"text-muted-foreground h-9 rounded-full px-3 hover:bg-emerald-50/30 hover:text-emerald-600",disabled:!g,children:[s.jsx(U,{className:"h-4 w-4 mr-1.5"}),s.jsx("span",{className:"text-xs",children:a.repostCount||0})]}),s.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>{g?W.mutate(a.isLiked||!1):k({title:"Authentication required",description:"Please sign in to like posts",variant:"default"})},className:"h-9 rounded-full px-3 hover:bg-pink-50/30 \n                  "+(a.isLiked?"text-pink-500":"text-muted-foreground hover:text-pink-500"),disabled:W.isPending,children:[s.jsx(L,{className:"h-4 w-4 mr-1.5 transition-colors duration-200 "+(a.isLiked?"fill-pink-500":"")}),s.jsx("span",{className:"text-xs",children:a.likeCount||0})]}),s.jsx(h,{variant:"ghost",size:"sm",className:"text-muted-foreground h-9 rounded-full px-3 hover:bg-blue-50/30 hover:text-blue-500",onClick:M,children:s.jsx(z,{className:"h-4 w-4"})})]})]})]}),D&&s.jsxs(f,{onOpenChange:e=>!e&&E(!1),children:[s.jsx(b,{asChild:!0,children:s.jsx("div",{className:"hidden",children:s.jsx("button",{children:"Share"})})}),s.jsx(N,{side:"bottom",className:"rounded-t-xl",children:s.jsxs("div",{className:"pt-2 pb-6",children:[s.jsx("h4",{className:"text-base font-medium mb-3 text-center",children:"Share this post"}),s.jsx("div",{className:"w-full",children:s.jsx(I,{url:`${window.location.origin}${_}`,title:`${a.author?.displayName||"User"}: ${a.content.substring(0,30)}...`,large:!0})})]})})]})]});var Y}function O({parentId:a,communityId:i,groupId:n,onSuccess:m,minimized:u=!0}){const{user:x}=j(),{toast:p}=t(),[g,C]=e.useState(""),[I,P]=e.useState(null),[$,U]=e.useState(null),[L,z]=e.useState(0),[q,T]=e.useState(!1),K=e.useRef(null),A=280,O=S({mutationFn:async e=>{if(I){const s=new FormData;s.append("content",e.content),void 0!==e.parentId&&s.append("parentId",e.parentId.toString()),void 0!==e.communityId&&s.append("communityId",e.communityId.toString()),void 0!==e.groupId&&s.append("groupId",e.groupId.toString()),s.append("authorId",e.authorId.toString()),s.append("image",I);const t=await fetch("/api/microblogs",{method:"POST",body:s,credentials:"include"});if(!t.ok)throw new Error("Failed to create microblog");return await t.json()}{const s=await r("POST","/api/microblogs",e);return await s.json()}},onSuccess:()=>{C(""),P(null),U(null),z(0),T(!1),v.invalidateQueries({queryKey:["/api/microblogs"]}),a&&v.invalidateQueries({queryKey:["/api/microblogs",a,"replies"]}),i&&v.invalidateQueries({queryKey:["/api/communities",i,"microblogs"]}),n&&v.invalidateQueries({queryKey:["/api/communities",n,"microblogs"]}),p({title:"Success",description:"Your post has been published"}),m&&m()},onError:e=>{p({title:"Error",description:`Failed to publish post: ${e.message}`,variant:"destructive"})}}),W=e=>{const s=e.target.value;C(s),z(s.length)},M=e=>{if(e.target.files&&e.target.files[0]){const s=e.target.files[0];P(s);const t=new FileReader;t.onloadend=()=>{U(t.result)},t.readAsDataURL(s)}},_=()=>{P(null),U(null),K.current&&(K.current.value="")},Y=()=>{if(!x)return void p({title:"Authentication required",description:"Please sign in to create posts",variant:"default"});if(""===g.trim())return void p({title:"Error",description:"Post content cannot be empty",variant:"destructive"});if(g.length>A)return void p({title:"Error",description:"Content exceeds 280 character limit",variant:"destructive"});const e={content:g,authorId:x.id,...a&&{parentId:a},...i&&{communityId:i},...n&&{groupId:n}};O.mutate(e)},H=()=>{K.current&&(K.current.accept="image/*",K.current.capture="environment",K.current.click())};return x?u?s.jsx("div",{className:"pb-3 border-b border-secondary/10 mb-4",children:s.jsxs(f,{open:q,onOpenChange:T,children:[s.jsx(b,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-2xl border border-secondary/20 active:bg-secondary/5",children:[s.jsx(l,{className:"h-8 w-8",children:x.avatarUrl?s.jsx(o,{src:x.avatarUrl,alt:x.displayName||"User"}):s.jsx(d,{children:c(x.displayName||"User")})}),s.jsx("span",{className:"text-muted-foreground text-sm flex-1",children:a?"Write your reply...":"What's on your mind?"}),s.jsx(F,{className:"h-5 w-5 text-primary/70"})]})}),s.jsxs(N,{side:"bottom",className:"h-[90vh] pt-6 rounded-t-3xl",children:[s.jsxs(y,{className:"text-left",children:[s.jsx(w,{children:a?"Reply to post":"Create a post"}),s.jsx(k,{children:"Share your thoughts with the community"})]}),s.jsxs("div",{className:"mt-4 flex flex-col h-[calc(100%-150px)]",children:[s.jsxs("div",{className:"flex gap-3 mb-3",children:[s.jsx(l,{children:x.avatarUrl?s.jsx(o,{src:x.avatarUrl,alt:x.displayName||"User"}):s.jsx(d,{children:c(x.displayName||"User")})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:x.displayName||x.username}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["@",x.username]})]})]}),s.jsx(R,{placeholder:a?"Write your reply...":"What's on your mind?",className:"flex-1 min-h-[150px] border-none resize-none focus-visible:ring-0 focus-visible:ring-offset-0 text-base p-0",value:g,onChange:W,autoFocus:!0}),$&&s.jsxs("div",{className:"relative my-3",children:[s.jsx("img",{src:$,alt:"Preview",className:"max-h-60 w-auto mx-auto object-contain rounded-lg border"}),s.jsx(h,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 rounded-full",onClick:_,children:s.jsx(D,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"pt-4 border-t mt-auto flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:K,onChange:M}),s.jsx(h,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10",onClick:()=>K.current?.click(),children:s.jsx(E,{className:"h-5 w-5 text-primary"})}),s.jsx(h,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10",onClick:H,children:s.jsx(F,{className:"h-5 w-5 text-primary"})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm "+(L>A?"text-red-500":"text-muted-foreground"),children:[L,"/",A]}),s.jsx(h,{disabled:""===g.trim()||L>A||O.isPending,onClick:Y,className:"rounded-full px-4",children:O.isPending?"Publishing...":s.jsxs("div",{className:"flex items-center",children:[a?"Reply":"Post"," ",s.jsx(Q,{className:"ml-1 h-4 w-4"})]})})]})]})]})]})]})}):s.jsxs("div",{className:"border-b border-secondary/20 p-4 mb-4 bg-white",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx(l,{children:x.avatarUrl?s.jsx(o,{src:x.avatarUrl,alt:x.displayName||"User"}):s.jsx(d,{children:c(x.displayName||"User")})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(R,{placeholder:a?"Write your reply...":"What's on your mind?",className:"border-none resize-none focus-visible:ring-0 focus-visible:ring-offset-0 text-base p-0 min-h-[100px]",value:g,onChange:W}),$&&s.jsxs("div",{className:"relative mt-2 inline-block",children:[s.jsx("img",{src:$,alt:"Preview",className:"max-h-52 max-w-full object-contain rounded-md border"}),s.jsx(h,{variant:"destructive",size:"icon",className:"absolute top-1 right-1 h-7 w-7 rounded-full",onClick:_,children:s.jsx(D,{className:"h-4 w-4"})})]})]})]}),s.jsxs("div",{className:"mt-4 pt-3 border-t flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:K,onChange:M}),s.jsx(h,{variant:"ghost",size:"sm",className:"text-primary p-2 h-9 w-9",onClick:()=>K.current?.click(),children:s.jsx(E,{className:"h-5 w-5"})}),s.jsx(h,{variant:"ghost",size:"sm",className:"text-primary p-2 h-9 w-9",onClick:H,children:s.jsx(F,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm "+(L>A?"text-red-500":"text-muted-foreground"),children:[L,"/",A]}),s.jsx(h,{disabled:""===g.trim()||L>A||O.isPending,onClick:Y,size:"sm",className:"rounded-full",children:O.isPending?"Publishing...":a?"Reply":"Post"})]})]})]}):s.jsx("div",{className:"border-b border-secondary/20 p-3 mb-3 bg-background text-center text-sm text-muted-foreground",children:"Please sign in to create posts"})}export{A as M,O as a,K as b,T as c};
