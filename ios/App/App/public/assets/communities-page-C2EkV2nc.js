import{r as e,y as s,z as a,j as t,B as r,i as n,E as o,F as i,k as l,G as c,H as d,J as m,K as u,M as h,N as x,Q as p,U as g,W as b,X as f,Y as j,Z as v}from"./vendor-radix-Cb0-vzxO.js";import{m as C,B as N,n as w,u as y,h as P,I as k,C as F,b as O,f as S,a as A,k as R,q as _,i as E}from"./index-CQmKbNyS.js";import{u as $,a as W}from"./vendor-query-qkAKzVJ0.js";import{u as D,F as I,a as M,b as B,c as q,d as T,e as z,t as K}from"./form-Z2c2XcTx.js";import{L}from"./label-BZLDYjV_.js";import{S as V}from"./switch-DyT2ZBYr.js";import{D as G,a as H,b as U,c as Y,d as J,e as Q,f as Z}from"./dialog-BfqlROKo.js";import{K as X,a as ee,U as se,f as ae,n as te,N as re,O as ne,Q as oe,G as ie,W as le,H as ce,M as de,c as me,Y as ue,Z as he,_ as xe,$ as pe,a0 as ge,a1 as be,a2 as fe,a3 as je,q as ve,P as Ce,g as Ne,X as we,a4 as ye}from"./vendor-icons-CM8Yk8yJ.js";import{o as Pe,b as ke,s as Fe}from"./types-DUVubNlp.js";import"./vendor-react-eVk5PToZ.js";import"./vendor-utils-nlnd1Dju.js";var Oe="Popover",[Se]=n(Oe,[s]),Ae=s(),[Re,_e]=Se(Oe),Ee=s=>{const{__scopePopover:n,children:i,open:l,defaultOpen:c,onOpenChange:d,modal:m=!1}=s,u=Ae(n),h=e.useRef(null),[x,p]=e.useState(!1),[g,b]=a({prop:l,defaultProp:c??!1,onChange:d,caller:Oe});return t.jsx(r,{...u,children:t.jsx(Re,{scope:n,contentId:o(),triggerRef:h,open:g,onOpenChange:b,onOpenToggle:e.useCallback(()=>b(e=>!e),[b]),hasCustomAnchor:x,onCustomAnchorAdd:e.useCallback(()=>p(!0),[]),onCustomAnchorRemove:e.useCallback(()=>p(!1),[]),modal:m,children:i})})};Ee.displayName=Oe;var $e="PopoverAnchor";e.forwardRef((s,a)=>{const{__scopePopover:r,...n}=s,o=_e($e,r),i=Ae(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=o;return e.useEffect(()=>(l(),()=>c()),[l,c]),t.jsx(d,{...i,...n,ref:a})}).displayName=$e;var We="PopoverTrigger",De=e.forwardRef((e,s)=>{const{__scopePopover:a,...r}=e,n=_e(We,a),o=Ae(a),m=i(s,n.triggerRef),u=t.jsx(l.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Ue(n.open),...r,ref:m,onClick:c(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?u:t.jsx(d,{asChild:!0,...o,children:u})});De.displayName=We;var Ie="PopoverPortal",[Me,Be]=Se(Ie,{forceMount:void 0}),qe=e=>{const{__scopePopover:s,forceMount:a,children:r,container:n}=e,o=_e(Ie,s);return t.jsx(Me,{scope:s,forceMount:a,children:t.jsx(m,{present:a||o.open,children:t.jsx(u,{asChild:!0,container:n,children:r})})})};qe.displayName=Ie;var Te="PopoverContent",ze=e.forwardRef((e,s)=>{const a=Be(Te,e.__scopePopover),{forceMount:r=a.forceMount,...n}=e,o=_e(Te,e.__scopePopover);return t.jsx(m,{present:r||o.open,children:o.modal?t.jsx(Le,{...n,ref:s}):t.jsx(Ve,{...n,ref:s})})});ze.displayName=Te;var Ke=p("PopoverContent.RemoveScroll"),Le=e.forwardRef((s,a)=>{const r=_e(Te,s.__scopePopover),n=e.useRef(null),o=i(a,n),l=e.useRef(!1);return e.useEffect(()=>{const e=n.current;if(e)return h(e)},[]),t.jsx(x,{as:Ke,allowPinchZoom:!0,children:t.jsx(Ge,{...s,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:c(s.onCloseAutoFocus,e=>{e.preventDefault(),l.current||r.triggerRef.current?.focus()}),onPointerDownOutside:c(s.onPointerDownOutside,e=>{const s=e.detail.originalEvent,a=0===s.button&&!0===s.ctrlKey,t=2===s.button||a;l.current=t},{checkForDefaultPrevented:!1}),onFocusOutside:c(s.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ve=e.forwardRef((s,a)=>{const r=_e(Te,s.__scopePopover),n=e.useRef(!1),o=e.useRef(!1);return t.jsx(Ge,{...s,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{s.onCloseAutoFocus?.(e),e.defaultPrevented||(n.current||r.triggerRef.current?.focus(),e.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:e=>{s.onInteractOutside?.(e),e.defaultPrevented||(n.current=!0,"pointerdown"===e.detail.originalEvent.type&&(o.current=!0));const a=e.target,t=r.triggerRef.current?.contains(a);t&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&o.current&&e.preventDefault()}})}),Ge=e.forwardRef((e,s)=>{const{__scopePopover:a,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:m,...u}=e,h=_e(Te,a),x=Ae(a);return g(),t.jsx(b,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:o,children:t.jsx(f,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:t.jsx(j,{"data-state":Ue(h.open),role:"dialog",id:h.contentId,...x,...u,ref:s,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),He="PopoverClose";e.forwardRef((e,s)=>{const{__scopePopover:a,...r}=e,n=_e(He,a);return t.jsx(l.button,{type:"button",...r,ref:s,onClick:c(e.onClick,()=>n.onOpenChange(!1))})}).displayName=He;function Ue(e){return e?"open":"closed"}e.forwardRef((e,s)=>{const{__scopePopover:a,...r}=e,n=Ae(a);return t.jsx(v,{...n,...r,ref:s})}).displayName="PopoverArrow";var Ye=qe,Je=ze;const Qe=Ee,Ze=De,Xe=e.forwardRef(({className:e,align:s="center",sideOffset:a=4,...r},n)=>t.jsx(Ye,{children:t.jsx(Je,{ref:n,align:s,sideOffset:a,className:C("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...r})}));Xe.displayName=Je.displayName;const es=[{name:"users",label:"Users",icon:t.jsx(se,{className:"h-5 w-5"})},{name:"bookopen",label:"Book",icon:t.jsx(ae,{className:"h-5 w-5"})},{name:"heart",label:"Heart",icon:t.jsx(te,{className:"h-5 w-5"})},{name:"music",label:"Music",icon:t.jsx(re,{className:"h-5 w-5"})},{name:"camera",label:"Camera",icon:t.jsx(ne,{className:"h-5 w-5"})},{name:"coffee",label:"Coffee",icon:t.jsx(oe,{className:"h-5 w-5"})},{name:"globe",label:"Globe",icon:t.jsx(ie,{className:"h-5 w-5"})},{name:"star",label:"Star",icon:t.jsx(le,{className:"h-5 w-5"})},{name:"home",label:"Home",icon:t.jsx(ce,{className:"h-5 w-5"})},{name:"messagecircle",label:"Messages",icon:t.jsx(de,{className:"h-5 w-5"})},{name:"calendar",label:"Calendar",icon:t.jsx(me,{className:"h-5 w-5"})},{name:"map",label:"Map",icon:t.jsx(ue,{className:"h-5 w-5"})},{name:"shield",label:"Shield",icon:t.jsx(he,{className:"h-5 w-5"})},{name:"zap",label:"Lightning",icon:t.jsx(xe,{className:"h-5 w-5"})},{name:"target",label:"Target",icon:t.jsx(pe,{className:"h-5 w-5"})},{name:"activity",label:"Activity",icon:t.jsx(ge,{className:"h-5 w-5"})},{name:"briefcase",label:"Business",icon:t.jsx(be,{className:"h-5 w-5"})},{name:"palette",label:"Art",icon:t.jsx(fe,{className:"h-5 w-5"})},{name:"graduationcap",label:"Education",icon:t.jsx(je,{className:"h-5 w-5"})}];function ss({value:s="users",onValueChange:a,disabled:r}){const[n,o]=e.useState(!1),i=es.find(e=>e.name===s)||es[0];return t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{children:"Community Icon"}),t.jsxs(Qe,{open:n,onOpenChange:o,children:[t.jsx(Ze,{asChild:!0,children:t.jsxs(N,{variant:"outline",className:C("w-full justify-between",!s&&"text-muted-foreground"),disabled:r,"data-testid":"button-icon-picker",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[i.icon,t.jsx("span",{children:i.label})]}),t.jsx(X,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),t.jsx(Xe,{className:"w-80 p-0",align:"start",children:t.jsx("div",{className:"grid grid-cols-4 gap-2 p-4",children:es.map(e=>t.jsxs(N,{variant:"ghost",className:C("h-14 flex flex-col gap-1 relative",s===e.name&&"bg-primary/10 text-primary"),onClick:()=>{return s=e.name,a?.(s),void o(!1);var s},"data-testid":`icon-option-${e.name}`,children:[s===e.name&&t.jsx(ee,{className:"absolute top-1 right-1 h-3 w-3 text-primary"}),e.icon,t.jsx("span",{className:"text-xs text-center",children:e.label})]},e.name))})})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose an icon that represents your community"})]})}const as=[{name:"blue",label:"Blue",value:"#3b82f6",bgClass:"bg-gradient-to-br from-blue-50 to-blue-100",previewClass:"bg-blue-500"},{name:"pink",label:"Pink",value:"#ec4899",bgClass:"bg-gradient-to-br from-pink-50 to-pink-100",previewClass:"bg-pink-500"},{name:"emerald",label:"Green",value:"#10b981",bgClass:"bg-gradient-to-br from-emerald-50 to-emerald-100",previewClass:"bg-emerald-500"},{name:"amber",label:"Amber",value:"#f59e0b",bgClass:"bg-gradient-to-br from-amber-50 to-amber-100",previewClass:"bg-amber-500"},{name:"purple",label:"Purple",value:"#8b5cf6",bgClass:"bg-gradient-to-br from-purple-50 to-purple-100",previewClass:"bg-purple-500"},{name:"indigo",label:"Indigo",value:"#6366f1",bgClass:"bg-gradient-to-br from-indigo-50 to-indigo-100",previewClass:"bg-indigo-500"},{name:"green",label:"Forest",value:"#22c55e",bgClass:"bg-gradient-to-br from-green-50 to-green-100",previewClass:"bg-green-500"},{name:"orange",label:"Orange",value:"#f97316",bgClass:"bg-gradient-to-br from-orange-50 to-orange-100",previewClass:"bg-orange-500"},{name:"teal",label:"Teal",value:"#14b8a6",bgClass:"bg-gradient-to-br from-teal-50 to-teal-100",previewClass:"bg-teal-500"},{name:"red",label:"Red",value:"#ef4444",bgClass:"bg-gradient-to-br from-red-50 to-red-100",previewClass:"bg-red-500"},{name:"rose",label:"Rose",value:"#f43f5e",bgClass:"bg-gradient-to-br from-rose-50 to-rose-100",previewClass:"bg-rose-500"},{name:"violet",label:"Violet",value:"#7c3aed",bgClass:"bg-gradient-to-br from-violet-50 to-violet-100",previewClass:"bg-violet-500"}];function ts({value:s="#3b82f6",onValueChange:a,disabled:r}){const[n,o]=e.useState(!1),i=as.find(e=>e.value===s)||as[0];return t.jsxs("div",{className:"space-y-2",children:[t.jsx(L,{children:"Community Color"}),t.jsxs(Qe,{open:n,onOpenChange:o,children:[t.jsx(Ze,{asChild:!0,children:t.jsxs(N,{variant:"outline",className:C("w-full justify-between",!s&&"text-muted-foreground"),disabled:r,"data-testid":"button-color-picker",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:C("w-4 h-4 rounded-full border border-gray-300",i.previewClass)}),t.jsx("span",{children:i.label})]}),t.jsx(X,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),t.jsx(Xe,{className:"w-80 p-0",align:"start",children:t.jsx("div",{className:"grid grid-cols-4 gap-2 p-4",children:as.map(e=>t.jsxs(N,{variant:"ghost",className:C("h-14 flex flex-col gap-1 relative",s===e.value&&"ring-2 ring-primary ring-offset-2"),onClick:()=>{return s=e.value,a?.(s),void o(!1);var s},"data-testid":`color-option-${e.name}`,children:[s===e.value&&t.jsx(ee,{className:"absolute top-1 right-1 h-3 w-3 text-primary bg-white rounded-full"}),t.jsx("div",{className:C("w-8 h-8 rounded-lg border border-gray-200",e.previewClass)}),t.jsx("span",{className:"text-xs text-center",children:e.label})]},e.name))})})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a color theme for your community"})]})}const rs=Pe({name:Fe().min(1,"Community name is required").max(100,"Name must be less than 100 characters"),description:Fe().min(1,"Description is required").max(500,"Description must be less than 500 characters"),iconName:Fe().default("users"),iconColor:Fe().default("#3b82f6"),isPrivate:ke().default(!1),hasPrivateWall:ke().default(!0),hasPublicWall:ke().default(!0)}).refine(e=>e.hasPrivateWall||e.hasPublicWall,{message:"At least one wall (private or public) must be enabled",path:["hasPublicWall"]});function ns(){const[,s]=w(),{user:a}=y(),{toast:r}=P(),[n,o]=e.useState(!1),[i,l]=e.useState(""),[c,d]=e.useState("");e.useEffect(()=>{const e=setTimeout(()=>{d(i)},300);return()=>clearTimeout(e)},[i]);const m=D({resolver:K(rs),defaultValues:{name:"",description:"",iconName:"users",iconColor:"#3b82f6",isPrivate:!1,hasPrivateWall:!0,hasPublicWall:!0}}),{data:u,isLoading:h,error:x}=$({queryKey:["/api/communities",c],queryFn:async()=>{const e=c?`?search=${encodeURIComponent(c)}`:"",s=await fetch(`/api/communities${e}`);if(!s.ok)throw new Error("Failed to fetch communities");return s.json()}}),p=W({mutationFn:async e=>{const s={...e,slug:e.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),createdBy:void 0},a=await E("POST","/api/communities",s);if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to create community")}return await a.json()},onSuccess:e=>{_.invalidateQueries({queryKey:["/api/communities"]}),r({title:"Community created",description:`"${e.name}" has been created successfully.`}),o(!1),m.reset(),s(`/communities/${e.slug}`)},onError:e=>{r({title:"Failed to create community",description:e.message,variant:"destructive"})}});if(h)return t.jsxs("div",{className:"flex justify-center items-center min-h-[600px]",children:[t.jsx(ve,{className:"h-8 w-8 animate-spin text-primary"}),t.jsx("span",{className:"ml-2",children:"Loading communities..."})]});if(x)return t.jsx("div",{className:"container max-w-6xl mx-auto px-4 py-8",children:t.jsxs("div",{className:"p-6 text-center",children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Communities"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:x?.message||"Failed to load communities."})]})});const g=[{bg:"bg-gradient-to-br from-pink-50 to-pink-100",iconColor:"text-pink-600"},{bg:"bg-gradient-to-br from-blue-50 to-blue-100",iconColor:"text-blue-600"},{bg:"bg-gradient-to-br from-emerald-50 to-emerald-100",iconColor:"text-emerald-600"},{bg:"bg-gradient-to-br from-amber-50 to-amber-100",iconColor:"text-amber-600"},{bg:"bg-gradient-to-br from-purple-50 to-purple-100",iconColor:"text-purple-600"},{bg:"bg-gradient-to-br from-indigo-50 to-indigo-100",iconColor:"text-indigo-600"},{bg:"bg-gradient-to-br from-green-50 to-green-100",iconColor:"text-green-600"},{bg:"bg-gradient-to-br from-orange-50 to-orange-100",iconColor:"text-orange-600"},{bg:"bg-gradient-to-br from-teal-50 to-teal-100",iconColor:"text-teal-600"},{bg:"bg-gradient-to-br from-red-50 to-red-100",iconColor:"text-red-600"}],b=e=>{const s=(e=>{const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)}:null})(e);if(!s)return{background:"linear-gradient(to bottom right, rgba(156, 163, 175, 0.1), rgba(156, 163, 175, 0.2))"};return{background:`linear-gradient(to bottom right, rgba(${s.r}, ${s.g}, ${s.b}, 0.1), rgba(${s.r}, ${s.g}, ${s.b}, 0.2))`}},f=[{title:"Christian Creatives",description:"Connect with writers, artists, musicians, and other creative Christians.",icon:t.jsx(fe,{className:"h-6 w-6 text-pink-600"}),link:"/communities/prayer-requests",color:"bg-pink-50"},{title:"Christian Entrepreneurs",description:"Network with business owners and startup founders who share your faith.",icon:t.jsx(be,{className:"h-6 w-6 text-amber-600"}),link:"/communities/bible-study",color:"bg-amber-50"},{title:"Christian Fitness",description:"Find workout partners, sports teams, and wellness groups for believers.",icon:t.jsx(ge,{className:"h-6 w-6 text-emerald-600"}),link:"/communities/theology",color:"bg-emerald-50"},{title:"College Students",description:"Connect with other Christian students at your university or in your city.",icon:t.jsx(je,{className:"h-6 w-6 text-indigo-600"}),link:"/communities/christian-life",color:"bg-indigo-50"}];return t.jsxs("div",{className:"container max-w-6xl mx-auto px-4 py-8",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Communities"}),t.jsx("p",{className:"text-muted-foreground mt-1",children:"Join or create communities to connect with others"})]}),a&&t.jsxs(G,{open:n,onOpenChange:e=>{o(e),e||m.reset()},children:[t.jsx(H,{asChild:!0,children:t.jsxs(N,{children:[t.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Create Community"]})}),t.jsxs(U,{children:[t.jsxs(Y,{children:[t.jsx(J,{children:"Create Community"}),t.jsx(Q,{children:"Create a new community for people to join and connect."})]}),t.jsx(I,{...m,children:t.jsxs("form",{onSubmit:m.handleSubmit(e=>{p.mutate(e)}),className:"space-y-4",children:[t.jsx(M,{control:m.control,name:"name",render:({field:e})=>t.jsxs(B,{children:[t.jsx(q,{children:"Community Name"}),t.jsx(T,{children:t.jsx(k,{placeholder:"Bible Study Group","data-testid":"input-community-name",...e})}),t.jsx(z,{})]})}),t.jsx(M,{control:m.control,name:"description",render:({field:e})=>t.jsxs(B,{children:[t.jsx(q,{children:"Description"}),t.jsx(T,{children:t.jsx(k,{placeholder:"A community for those interested in studying the Bible together","data-testid":"input-community-description",...e})}),t.jsx(z,{})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(M,{control:m.control,name:"iconName",render:({field:e})=>t.jsxs(B,{children:[t.jsx(T,{children:t.jsx(ss,{value:e.value,onValueChange:e.onChange,disabled:p.isPending})}),t.jsx(z,{})]})}),t.jsx(M,{control:m.control,name:"iconColor",render:({field:e})=>t.jsxs(B,{children:[t.jsx(T,{children:t.jsx(ts,{value:e.value,onValueChange:e.onChange,disabled:p.isPending})}),t.jsx(z,{})]})})]}),t.jsx(M,{control:m.control,name:"isPrivate",render:({field:e})=>t.jsxs(B,{className:"p-4 border rounded-lg bg-muted/30",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(T,{children:t.jsx(V,{checked:e.value,onCheckedChange:e.onChange,"data-testid":"switch-private-community"})}),t.jsx(q,{className:"font-semibold",children:"Invite Only Community"})]}),t.jsx("p",{className:"text-sm text-muted-foreground ml-6",children:e.value?"Only people with invitations can join this community. You can invite members after creation.":"Anyone can discover and join this community freely."})]})}),t.jsxs("div",{className:"grid gap-3",children:[t.jsx(L,{className:"font-semibold",children:"Community Wall Settings"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(M,{control:m.control,name:"hasPublicWall",render:({field:e})=>t.jsx(B,{children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(T,{children:t.jsx(V,{checked:e.value,onCheckedChange:e.onChange,"data-testid":"switch-public-wall"})}),t.jsx(q,{children:"Public Wall"})]})})}),t.jsx(M,{control:m.control,name:"hasPrivateWall",render:({field:e})=>t.jsx(B,{children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(T,{children:t.jsx(V,{checked:e.value,onCheckedChange:e.onChange,"data-testid":"switch-private-wall"})}),t.jsx(q,{children:"Private Wall"})]})})})]}),m.formState.errors.hasPublicWall&&t.jsx("p",{className:"text-sm text-red-600",children:m.formState.errors.hasPublicWall?.message}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Wall settings control where members can post content within the community."})]}),t.jsx(Z,{children:t.jsx(N,{type:"submit",disabled:p.isPending,"data-testid":"button-create-community",children:p.isPending?t.jsxs(t.Fragment,{children:[t.jsx(ve,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Community"})})]})})]})]})]}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"relative max-w-md",children:[t.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx(k,{type:"text",placeholder:"Search communities...",value:i,onChange:e=>l(e.target.value),className:"pl-10 pr-10","data-testid":"input-search-communities"}),i&&t.jsx(N,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0 hover:bg-muted",onClick:()=>l(""),"data-testid":"button-clear-search",children:t.jsx(we,{className:"h-3 w-3"})})]}),c&&t.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Searching for: ",t.jsxs("span",{className:"font-medium",children:['"',c,'"']})]})]}),t.jsxs("div",{className:"mb-10",children:[t.jsxs("div",{className:"flex items-center mb-5",children:[t.jsx("h2",{className:"text-2xl font-semibold",children:"Interest-Based Communities"}),t.jsx("div",{className:"ml-3 px-3 py-1 bg-primary/10 text-primary rounded-full text-xs font-medium",children:"New"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:f.map((e,a)=>t.jsxs(F,{className:`cursor-pointer hover:shadow-md transition-shadow ${e.color} border-none`,onClick:()=>s(e.link),children:[t.jsx(O,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[e.icon,t.jsx(S,{className:"text-lg",children:e.title})]})}),t.jsx(A,{children:t.jsx("p",{className:"text-sm text-gray-700",children:e.description})}),t.jsx(R,{className:"pt-0",children:t.jsx(N,{variant:"outline",className:"w-full bg-white/70",onClick:a=>{a.stopPropagation(),s(e.link)},children:"Explore"})})]},a))})]}),t.jsx("div",{className:"border-t my-8"}),t.jsx("div",{className:"mb-6",children:t.jsx("h2",{className:"text-2xl font-semibold",children:"All Communities"})}),u&&0!==u.length?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:u.map(e=>{const a=(e=>{if(e.iconColor&&(s=e.iconColor,/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(s)))return{bg:null,bgStyle:b(e.iconColor),iconStyle:{color:e.iconColor},iconColor:void 0,isCustom:!0};var s;const a=g[e.id%g.length];return{bg:a.bg,bgStyle:null,iconColor:a.iconColor,iconStyle:void 0,isCustom:!1}})(e),r=((e,s)=>{const a="string"==typeof s?{className:`h-6 w-6 ${s}`}:{className:"h-6 w-6",style:s};switch(e.toLowerCase()){case"users":default:return t.jsx(se,{...a});case"bookopen":case"book":return t.jsx(ae,{...a});case"heart":return t.jsx(te,{...a});case"music":return t.jsx(re,{...a});case"camera":return t.jsx(ne,{...a});case"coffee":return t.jsx(oe,{...a});case"globe":return t.jsx(ie,{...a});case"star":return t.jsx(le,{...a});case"home":return t.jsx(ce,{...a});case"messagecircle":case"message":return t.jsx(de,{...a});case"calendar":return t.jsx(me,{...a});case"map":return t.jsx(ue,{...a});case"shield":return t.jsx(he,{...a});case"zap":return t.jsx(xe,{...a});case"target":return t.jsx(pe,{...a});case"palette":return t.jsx(fe,{...a});case"briefcase":return t.jsx(be,{...a});case"activity":return t.jsx(ge,{...a});case"graduationcap":return t.jsx(je,{...a})}})(e.iconName||"users",(a.isCustom?a.iconStyle:a.iconColor)||"text-gray-600"),n=a.isCustom&&a.bgStyle?{style:a.bgStyle}:{},o=a.isCustom?"cursor-pointer hover:shadow-md transition-shadow border-none":`cursor-pointer hover:shadow-md transition-shadow ${a.bg} border-none`;return t.jsxs(F,{className:o,...n,onClick:()=>s(`/communities/${e.slug}`),children:[t.jsx(O,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center gap-2",children:[r,t.jsx(S,{className:"text-lg flex-1",children:e.name}),t.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.isPrivate&&t.jsx("span",{title:"Invite Only",children:t.jsx(ye,{className:"h-4 w-4 text-red-500"})}),e.hasPrivateWall&&t.jsx("span",{title:"Has Private Wall",children:t.jsx(ye,{className:"h-4 w-4 text-amber-500"})})]})]})}),t.jsxs(A,{children:[t.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-3",children:e.description}),t.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[t.jsx(se,{className:"mr-1 h-4 w-4 flex-shrink-0"}),t.jsxs("span",{children:[e.memberCount||0," members"]})]})]}),t.jsx(R,{className:"pt-0",children:t.jsx(N,{variant:"outline",className:"w-full bg-white/70 hover:bg-white/90",onClick:a=>{a.stopPropagation(),s(`/communities/${e.slug}`)},children:"Explore"})})]},e.id)})}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(se,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),c?t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Communities Found"}),t.jsxs("p",{className:"text-muted-foreground mb-4",children:['No communities match your search for "',c,'". Try a different search term.']}),t.jsx(N,{variant:"outline",onClick:()=>l(""),"data-testid":"button-clear-search-results",children:"Clear Search"})]}):t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Communities Yet"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"Be the first to create a community!"}),a?t.jsxs(N,{onClick:()=>o(!0),children:[t.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Create Community"]}):t.jsx(N,{onClick:()=>s("/auth"),children:"Sign In to Create"})]})]})]})}export{ns as default};
